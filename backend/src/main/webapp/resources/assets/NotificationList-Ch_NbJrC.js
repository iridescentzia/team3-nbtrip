import{a as C,D as I,_ as w,E as b,r as p,o as A,e as r,f as c,x as u,g as i,j as N,A as R,t as l,u as f,F as _,p as h,C as S}from"./index-DnZWa4VO.js";import{c as D,H as V}from"./Header-Dmkwxh5a.js";import{C as M}from"./chevron-right-1McQJYUC.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=D("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),O=(a,e)=>{const n=e&&e!=="ALL"?`?category=${e}`:"";return C.get(`/notifications/${a}${n}`)},F=a=>C.put(`/notifications/${a}/read`),B=I("notification",{state:()=>({notifications:[],selectedCategory:"ALL"}),actions:{async getNotifications(a,e="ALL"){try{const{data:n}=await O(a,e);this.notifications=n,this.selectedCategory=e}catch(n){console.error("알림 조회 실패:",n)}},async readNotification(a){try{await F(a);const e=this.notifications.find(n=>n.notificationId===a);e&&(e.isRead=!0)}catch(e){console.error("알림 읽음 처리 실패:",e)}}}}),H={class:"layout-wrapper"},P={class:"dropdown sticky-category"},U={key:0,class:"dropdown-menu"},j=["onClick"],q={class:"scroll-area"},z=["onClick"],G={class:"card-content"},J={key:0,class:"card-title"},K={class:"card-body"},Q={class:"card-time"},v=1,W={__name:"NotificationList",setup(a){const e=B(),{notifications:n}=b(e),d=p(!1),m=p("전체"),T=[{label:"전체",value:"ALL"},{label:"결제",value:"TRANSACTION"},{label:"정산",value:"SETTLEMENT"},{label:"그룹",value:"INVITE"}],$=()=>{d.value=!d.value},y=t=>{m.value=t.label,d.value=!1,e.getNotifications(v,t.value)},E=t=>{e.readNotification(t.notificationId)},g=t=>!t&&t!==0?"":new Intl.NumberFormat("ko-KR").format(t);A(()=>{e.getNotifications(v)});const L=t=>{const o=t.fromUserNickname||"누군가",s=t.merchantName||"알 수 없는 장소";switch(t.notificationType){case"TRANSACTION":return`${o}님이 '${s}'에서 
${g(t.amount)}원을 결제했습니다.`;case"SETTLEMENT":return`${o}님이 정산 요청을 보냈습니다.
정산을 확인하시겠습니까?`;case"INVITE":return`${o}님이 "${t.tripName}" 그룹에 초대하셨습니다.
여행에 참여하시겠습니까?`;case"GROUP_EVENT":return t.memberStatus==="JOINED"?`${o}님이 ${t.tripName} 그룹에 들어왔습니다.`:t.memberStatus==="LEFT"?`${o}님이 ${t.tripName} 그룹에서 나갔습니다.`:`${o}님의 그룹 상태가 변경되었습니다.`;case"REMINDER":return`${o}님이 정산 알림을 보냈습니다.`;case"COMPLETED":return`${o}님이 정산을 완료했습니다.`;default:return`${o}님이 새로운 알림을 보냈습니다.`}};return(t,o)=>(c(),r("div",H,[u(V,{title:"알림"}),i("div",P,[i("button",{class:"dropdown-btn",onClick:$},[R(l(m.value)+" ",1),u(f(x),{class:"dropdown-icon"})]),d.value?(c(),r("ul",U,[(c(),r(_,null,h(T,s=>i("li",{key:s.value,onClick:k=>y(s)},l(s.label),9,j)),64))])):N("",!0),o[0]||(o[0]=i("hr",null,null,-1))]),o[1]||(o[1]=i("br",null,null,-1)),i("main",q,[(c(!0),r(_,null,h(f(n),s=>(c(),r("div",{class:S(["notification-card",{read:s.isRead}]),key:s.notificationId,onClick:k=>E(s)},[i("div",G,[s.notificationType!=="INVITE"?(c(),r("p",J," ["+l(s.tripName)+"] ",1)):N("",!0),i("p",K,l(L(s)),1),i("p",Q,l(s.sendAt.split(".")[0].substring(0,16)),1)]),u(f(M),{class:"card-arrow"})],10,z))),128))])]))}},tt=w(W,[["__scopeId","data-v-9930bfa7"]]);export{tt as default};
