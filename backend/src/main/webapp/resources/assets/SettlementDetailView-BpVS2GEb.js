import{H as x}from"./Header-Be9nYM7H.js";import{a as b}from"./settlementApi-gSP5ruC7.js";import{_ as k,r as u,s as S,o as w,c as _,e as o,f as a,g as t,x as N,j as L,t as l,F as h,p,A as d}from"./index-Cx10XH97.js";const I={class:"view-wrapper"},R={class:"settlement-view"},V={key:0,class:"content-container loading"},D={key:1,class:"content-container error"},A={key:2,class:"content-container"},B={class:"summary-header"},M={class:"trip-name"},T={class:"total-amount"},C={class:"settlement-card bg-theme-primary"},F={class:"transaction-list"},H={key:0},j={class:"member-info"},E={class:"avatar bg-theme-secondary"},$={class:"font-semibold text-sm text-theme-text"},q={class:"amount text-theme-text"},z={key:1,class:"empty-message text-theme-text"},G={class:"settlement-card bg-theme-secondary"},J={class:"transaction-list"},K={key:0},O={class:"member-info"},P={class:"avatar bg-theme-primary"},Q={class:"font-semibold text-sm text-white"},U={class:"amount text-white"},W={key:1,class:"empty-message text-white"},X={class:"summary-card"},Y={key:0,class:"text-theme-text"},Z={class:"font-bold text-lg text-theme-blue"},tt={key:1,class:"text-theme-text"},et={class:"font-bold text-lg text-theme-red"},st={key:2,class:"font-bold text-theme-text"},ot={class:"footer"},at=["disabled"],nt={__name:"SettlementDetailView",setup(lt){const s=u(null),v=u(!0),m=u(null),y=S().params.tripId;w(async()=>{try{const n=await b(y);s.value=n.data}catch(n){console.error("개인 정산 정보 로딩 실패:",n),m.value="데이터를 불러오는 데 실패했습니다."}finally{v.value=!1}});const f=_(()=>s.value?.toReceive?s.value.toReceive.reduce((n,e)=>n+e.amount,0):0),r=_(()=>s.value?.toSend?s.value.toSend.reduce((n,e)=>n+e.amount,0):0),c=_(()=>f.value-r.value),g=async()=>{if(r.value===0){alert("보낼 돈이 없습니다.");return}if(confirm(`총 ${r.value.toLocaleString()}원을 송금할까요?`))try{const n=s.value.toSend.map(e=>e.settlementId);alert("송금이 완료되었습니다!")}catch(n){console.error("송금 실패:",n),alert("송금 중 오류가 발생했습니다.")}};return(n,e)=>(a(),o("div",I,[t("div",R,[N(x,{title:"정산하기"}),v.value?(a(),o("main",V,e[0]||(e[0]=[t("p",null,"내 정산 내역을 불러오는 중...",-1)]))):m.value?(a(),o("main",D,[t("p",null,l(m.value),1)])):s.value?(a(),o("main",A,[t("div",B,[t("p",M,l(s.value.tripName),1),t("h2",T," 총 "+l(s.value.totalAmount?.toLocaleString()||0)+"원 사용 ",1)]),t("div",C,[e[1]||(e[1]=t("p",{class:"card-title text-theme-text"},"💸 받을 돈",-1)),t("div",F,[s.value.toReceive&&s.value.toReceive.length>0?(a(),o("div",H,[(a(!0),o(h,null,p(s.value.toReceive,i=>(a(),o("div",{key:i.settlementId,class:"transaction-item"},[t("div",j,[t("div",E,[t("span",null,l(i.senderNickname.substring(0,1)),1)]),t("span",$,l(i.senderNickname),1)]),t("span",q,l(i.amount.toLocaleString())+"원",1)]))),128))])):(a(),o("p",z," 받을 돈이 없습니다. "))])]),t("div",G,[e[2]||(e[2]=t("p",{class:"card-title text-white"},"💌 보낼 돈",-1)),t("div",J,[s.value.toSend&&s.value.toSend.length>0?(a(),o("div",K,[(a(!0),o(h,null,p(s.value.toSend,i=>(a(),o("div",{key:i.settlementId,class:"transaction-item"},[t("div",O,[t("div",P,[t("span",null,l(i.receiverNickname.substring(0,1)),1)]),t("span",Q,l(i.receiverNickname),1)]),t("span",U,l(i.amount.toLocaleString())+"원",1)]))),128))])):(a(),o("p",W,"보낼 돈이 없습니다."))])]),t("div",X,[c.value>0?(a(),o("p",Y,[e[3]||(e[3]=d(" 총 ",-1)),t("span",Z,l(c.value.toLocaleString())+"원",1),e[4]||(e[4]=d("을 받으면 정산 완료! ",-1))])):c.value<0?(a(),o("p",tt,[e[5]||(e[5]=d(" 총 ",-1)),t("span",et,l(Math.abs(c.value).toLocaleString())+"원",1),e[6]||(e[6]=d("을 보내면 정산 완료! ",-1))])):(a(),o("p",st,"정산이 완료되었습니다!"))])])):L("",!0),t("footer",ot,[t("button",{onClick:g,class:"next-button",disabled:r.value===0}," 송금하기 ",8,at)])])]))}},mt=k(nt,[["__scopeId","data-v-da57b90e"]]);export{mt as default};
