import{H as x}from"./Header-Le6RA2St.js";import{a as k}from"./settlementApi-BYfF8rV4.js";import{_ as S,r as m,s as b,o as N,c as _,e as o,f as a,g as t,x as I,j as L,t as l,F as p,p as h,A as d}from"./index-q_94Ny1N.js";const R={class:"view-wrapper"},w={class:"settlement-view"},V={key:0,class:"content-container loading"},D={key:1,class:"content-container error"},A={key:2,class:"content-container"},B={class:"summary-header"},M={class:"trip-name"},T={class:"total-amount"},C={class:"settlement-card"},F={class:"transaction-list"},H={key:0},j={class:"member-info"},E={class:"avatar"},$={class:"font-semibold text-sm text-theme-text"},q={class:"amount text-theme-text"},z={key:1,class:"empty-message text-theme-text"},G={class:"settlement-card"},J={class:"transaction-list"},K={key:0},O={class:"member-info"},P={class:"avatar"},Q={class:"font-semibold text-sm"},U={class:"amount"},W={key:1,class:"empty-message"},X={class:"summary-card"},Y={key:0,class:"text-theme-text"},Z={class:"font-bold text-lg text-theme-blue"},tt={key:1,class:"text-theme-text"},et={class:"font-bold text-lg text-theme-red"},st={key:2,class:"font-bold text-theme-text"},ot={class:"footer"},at=["disabled"],nt={__name:"SettlementDetailView",setup(lt){const s=m(null),v=m(!0),u=m(null),f=b().params.tripId;N(async()=>{try{const n=await k(f,userId);s.value=n.data}catch(n){console.error("ê°œì¸ ì •ì‚° ì •ë³´ ë¡œë”© ì‹¤íŒ¨:",n),u.value="ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}finally{v.value=!1}});const y=_(()=>s.value?.toReceive?s.value.toReceive.reduce((n,e)=>n+e.amount,0):0),r=_(()=>s.value?.toSend?s.value.toSend.reduce((n,e)=>n+e.amount,0):0),c=_(()=>y.value-r.value),g=async()=>{if(r.value===0){alert("ë³´ë‚¼ ëˆì´ ì—†ìŠµë‹ˆë‹¤.");return}if(confirm(`ì´ ${r.value.toLocaleString()}ì›ì„ ì†¡ê¸ˆí• ê¹Œìš”?`))try{const n=s.value.toSend.map(e=>e.settlementId);alert("ì†¡ê¸ˆì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")}catch(n){console.error("ì†¡ê¸ˆ ì‹¤íŒ¨:",n),alert("ì†¡ê¸ˆ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}};return(n,e)=>(a(),o("div",R,[t("div",w,[I(x,{title:"ì •ì‚°í•˜ê¸°"}),v.value?(a(),o("main",V,e[0]||(e[0]=[t("p",null,"ë‚´ ì •ì‚° ë‚´ì—­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",-1)]))):u.value?(a(),o("main",D,[t("p",null,l(u.value),1)])):s.value?(a(),o("main",A,[t("div",B,[t("p",M,l(s.value.tripName),1),t("h2",T," ì´ "+l(s.value.totalAmount?.toLocaleString()||0)+"ì› ì‚¬ìš© ",1)]),t("div",C,[e[1]||(e[1]=t("p",{class:"card-title text-theme-text"},"ğŸ’¸ ë°›ì„ ëˆ",-1)),t("div",F,[s.value.toReceive&&s.value.toReceive.length>0?(a(),o("div",H,[(a(!0),o(p,null,h(s.value.toReceive,i=>(a(),o("div",{key:i.settlementId,class:"transaction-item"},[t("div",j,[t("div",E,[t("span",null,l(i.senderNickname.substring(0,1)),1)]),t("span",$,l(i.senderNickname),1)]),t("span",q,l(i.amount.toLocaleString())+"ì›",1)]))),128))])):(a(),o("p",z," ë°›ì„ ëˆì´ ì—†ìŠµë‹ˆë‹¤. "))])]),t("div",G,[e[2]||(e[2]=t("p",{class:"card-title"},"ğŸ’Œ ë³´ë‚¼ ëˆ",-1)),t("div",J,[s.value.toSend&&s.value.toSend.length>0?(a(),o("div",K,[(a(!0),o(p,null,h(s.value.toSend,i=>(a(),o("div",{key:i.settlementId,class:"transaction-item"},[t("div",O,[t("div",P,[t("span",null,l(i.receiverNickname.substring(0,1)),1)]),t("span",Q,l(i.receiverNickname),1)]),t("span",U,l(i.amount.toLocaleString())+"ì›",1)]))),128))])):(a(),o("p",W,"ë³´ë‚¼ ëˆì´ ì—†ìŠµë‹ˆë‹¤."))])]),t("div",X,[c.value>0?(a(),o("p",Y,[e[3]||(e[3]=d(" ì´ ",-1)),t("span",Z,l(c.value.toLocaleString())+"ì›",1),e[4]||(e[4]=d("ì„ ë°›ìœ¼ë©´ ì •ì‚° ì™„ë£Œ! ",-1))])):c.value<0?(a(),o("p",tt,[e[5]||(e[5]=d(" ì´ ",-1)),t("span",et,l(Math.abs(c.value).toLocaleString())+"ì›",1),e[6]||(e[6]=d("ì„ ë³´ë‚´ë©´ ì •ì‚° ì™„ë£Œ! ",-1))])):(a(),o("p",st,"ì •ì‚°ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"))])])):L("",!0),t("footer",ot,[t("button",{onClick:g,class:"next-button",disabled:r.value===0}," ì†¡ê¸ˆí•˜ê¸° ",8,at)])])]))}},ut=S(nt,[["__scopeId","data-v-d9149eba"]]);export{ut as default};
