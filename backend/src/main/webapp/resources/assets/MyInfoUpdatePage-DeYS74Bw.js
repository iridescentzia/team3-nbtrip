import{_ as M,y as B,r as t,e as I,o as D,f as b,g as k,m as g,h as a,l as w,i as u,p as r,H,t as P,C as V}from"./index-US_OYwol.js";import{H as _}from"./Header-CZn7AqsN.js";import{B as T}from"./Button-CSrGeNA8.js";import{g as z,b as E,u as R}from"./memberApi-CrxvAOh_.js";import"./createLucideIcon-CzoFUsn0.js";const S={class:"update-container"},j={class:"form-area"},q={class:"nickname-wrapper"},A={key:0,class:"nickname-check-message"},F={class:"password-check"},G={key:0,class:"error"},J={key:1,class:"success"},K={class:"bottom-fixed"},L={__name:"MyInfoUpdatePage",setup(O){const x=B(),n=t(""),i=t(""),p=t(""),c=t(""),d=t(""),o=t(""),f=t(!1),v=t(!1),m=t(""),y=I(()=>d.value===o.value),N=()=>x.back();D(async()=>{try{const s=await z();s.success&&(n.value=s.data.nickname,i.value=s.data.name,p.value=s.data.phoneNumber,c.value=s.data.email)}catch{alert("회원 정보 조회 실패")}});const U=async()=>{if(!n.value.trim()){alert("닉네임을 입력해주세요.");return}try{const s=await E(n.value);v.value=!0,m.value=s.message||"사용 가능한 닉네임입니다.",f.value=!0}catch(s){v.value=!1,f.value=!1,m.value=s.message||"이미 사용 중인 닉네임입니다."}},C=async()=>{if(!n.value||!i.value||!p.value||!c.value||!d.value||!o.value){alert("모든 항목을 입력해주세요.");return}if(!f.value||!v.value){alert("닉네임 중복 확인을 해주세요.");return}if(!y.value){alert("비밀번호가 일치하지 않습니다.");return}try{(await R({nickname:n.value,name:i.value,phoneNumber:p.value,email:c.value,password:d.value,passwordConfirm:o.value})).success&&(alert("회원 정보가 수정되었습니다."),x.push("/mypage"))}catch(s){alert(s.message||"회원 정보 수정 실패")}};return(s,e)=>(k(),b("div",S,[g(_,{title:"회원 정보","back-action":N}),a("div",j,[e[6]||(e[6]=a("label",{class:"label"},"닉네임",-1)),a("div",q,[u(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),type:"text",class:"nickname-input"},null,512),[[r,n.value]]),a("button",{class:"nickname-check-button",onClick:U},"중복 확인")]),m.value?(k(),b("div",A,[a("span",{class:H(v.value?"success":"error")},P(m.value),3)])):w("",!0),e[7]||(e[7]=a("label",{class:"label"},"이름",-1)),u(a("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),type:"text",class:"input-box"},null,512),[[r,i.value]]),e[8]||(e[8]=a("label",{class:"label"},"전화번호",-1)),u(a("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>p.value=l),type:"text",class:"input-box"},null,512),[[r,p.value]]),e[9]||(e[9]=a("label",{class:"label"},"이메일",-1)),u(a("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>c.value=l),type:"email",class:"input-box"},null,512),[[r,c.value]]),e[10]||(e[10]=a("label",{class:"label"},"비밀번호",-1)),u(a("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>d.value=l),type:"password",class:"input-box"},null,512),[[r,d.value]]),e[11]||(e[11]=a("p",{class:"password-rules"},[V(" • 비밀번호는 영문 소문자, 숫자를 포함해 최소 9자리 이상이어야 합니다."),a("br"),V(" • 3자 이상의 연속되는 글자, 숫자는 사용이 불가능합니다. ")],-1)),e[12]||(e[12]=a("label",{class:"label"},"비밀번호 확인",-1)),u(a("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.value=l),type:"password",class:"input-box"},null,512),[[r,o.value]]),a("div",F,[o.value&&!y.value?(k(),b("span",G,"비밀번호가 동일하지 않습니다.")):w("",!0),o.value&&y.value?(k(),b("span",J,"비밀번호가 동일합니다.")):w("",!0)])]),a("div",K,[g(T,{label:"저장",onClick:C})])]))}},$=M(L,[["__scopeId","data-v-20ea5a1c"]]);export{$ as default};
