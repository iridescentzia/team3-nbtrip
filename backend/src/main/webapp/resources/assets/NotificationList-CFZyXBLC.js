import{a as T,d as I,_ as b,x as w,r as p,o as A,f as r,m as u,h as n,l as N,C as R,t as l,u as f,F as _,q as h,g as c,H as S}from"./index-63xutS7e.js";import{H as V}from"./Header-Be37AaWa.js";import{C as D}from"./chevron-down-BTNdKwi-.js";import{C as M}from"./chevron-right-Bp249gNV.js";import"./createLucideIcon-R9XTMovA.js";const x=(a,e)=>{const i=e&&e!=="ALL"?`?category=${e}`:"";return T.get(`/notifications/${a}${i}`)},O=a=>T.put(`/notifications/${a}/read`),F=I("notification",{state:()=>({notifications:[],selectedCategory:"ALL"}),actions:{async getNotifications(a,e="ALL"){try{const{data:i}=await x(a,e);this.notifications=i,this.selectedCategory=e}catch(i){console.error("알림 조회 실패:",i)}},async readNotification(a){try{await O(a);const e=this.notifications.find(i=>i.notificationId===a);e&&(e.isRead=!0)}catch(e){console.error("알림 읽음 처리 실패:",e)}}}}),B={class:"layout-wrapper"},H={class:"dropdown sticky-category"},P={key:0,class:"dropdown-menu"},U=["onClick"],q={class:"scroll-area"},z=["onClick"],G={class:"card-content"},J={key:0,class:"card-title"},K={class:"card-body"},Q={class:"card-time"},C=1,j={__name:"NotificationList",setup(a){const e=F(),{notifications:i}=w(e),d=p(!1),m=p("전체"),$=[{label:"전체",value:"ALL"},{label:"결제",value:"TRANSACTION"},{label:"정산",value:"SETTLEMENT"},{label:"그룹",value:"INVITE"}],v=()=>{d.value=!d.value},y=t=>{m.value=t.label,d.value=!1,e.getNotifications(C,t.value)},E=t=>{e.readNotification(t.notificationId)},g=t=>!t&&t!==0?"":new Intl.NumberFormat("ko-KR").format(t);A(()=>{e.getNotifications(C)});const L=t=>{const o=t.fromUserNickname||"누군가",s=t.merchantName||"알 수 없는 장소";switch(t.notificationType){case"TRANSACTION":return`${o}님이 '${s}'에서 
${g(t.amount)}원을 결제했습니다.`;case"SETTLEMENT":return`${o}님이 정산 요청을 보냈습니다.
정산을 확인하시겠습니까?`;case"INVITE":return`${o}님이 "${t.tripName}" 그룹에 초대하셨습니다.
여행에 참여하시겠습니까?`;case"GROUP_EVENT":return t.memberStatus==="JOINED"?`${o}님이 ${t.tripName} 그룹에 들어왔습니다.`:t.memberStatus==="LEFT"?`${o}님이 ${t.tripName} 그룹에서 나갔습니다.`:`${o}님의 그룹 상태가 변경되었습니다.`;case"REMINDER":return`${o}님이 정산 알림을 보냈습니다.`;case"COMPLETED":return`${o}님이 정산을 완료했습니다.`;default:return`${o}님이 새로운 알림을 보냈습니다.`}};return(t,o)=>(c(),r("div",B,[u(V,{title:"알림"}),n("div",H,[n("button",{class:"dropdown-btn",onClick:v},[R(l(m.value)+" ",1),u(f(D),{class:"dropdown-icon"})]),d.value?(c(),r("ul",P,[(c(),r(_,null,h($,s=>n("li",{key:s.value,onClick:k=>y(s)},l(s.label),9,U)),64))])):N("",!0),o[0]||(o[0]=n("hr",null,null,-1))]),o[1]||(o[1]=n("br",null,null,-1)),n("main",q,[(c(!0),r(_,null,h(f(i),s=>(c(),r("div",{class:S(["notification-card",{read:s.isRead}]),key:s.notificationId,onClick:k=>E(s)},[n("div",G,[s.notificationType!=="INVITE"?(c(),r("p",J," ["+l(s.tripName)+"] ",1)):N("",!0),n("p",K,l(L(s)),1),n("p",Q,l(s.sendAt.split(".")[0].substring(0,16)),1)]),u(f(M),{class:"card-arrow"})],10,z))),128))])]))}},et=b(j,[["__scopeId","data-v-9930bfa7"]]);export{et as default};
