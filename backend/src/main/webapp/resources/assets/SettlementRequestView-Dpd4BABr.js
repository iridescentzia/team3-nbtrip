import{_ as L,s as V,x as q,q as B,o as D,e as s,f as n,g as e,y as I,j as M,u as o,t as a,h as g,z as f,A as S,F as c,p as d}from"./index-DVXXoadO.js";import{H as A}from"./Header2-CIECm1Em.js";import{u as C}from"./settlementStore-BKjqvKni.js";const F={class:"view-wrapper"},H={class:"settlement-view"},T={key:0,class:"content-container loading"},U={key:1,class:"content-container error"},$={key:2,class:"content-container"},j={class:"summary-header"},x={class:"trip-name"},z={class:"total-amount"},E={class:"settlement-card"},G={class:"card-header"},J=["value"],K={class:"transaction-list"},O={key:0},P={class:"member-info"},Q={class:"avatar bg-theme-secondary"},W={class:"amount"},X={key:1,class:"empty-message"},Y={class:"settlement-card"},Z={class:"card-header"},ee=["value"],te={class:"transaction-list"},se={key:0},ne={class:"member-info"},oe={class:"avatar bg-theme-primary"},ae={class:"amount"},re={key:1,class:"empty-message"},ie={__name:"SettlementRequestView",setup(le){const p=C(),{groupSettlementData:l,selectedMember:i,isLoading:b,error:h,toReceiveList:v,toSendList:y}=V(p),N=q(),k=B(),u=N.params.tripId,R=()=>{k.push(`/settlement/${u}`)};D(async()=>{try{await p.fetchGroupSettlement(u)}catch{}});const w=async()=>{if(confirm("정산 내역을 확인하러 가시겠습니까?"))try{k.push(`/settlement/${u}/detail`)}catch(m){console.error("페이지 이동 실패:",m),alert("페이지 이동에 실패했습니다.")}};return(m,r)=>(n(),s("div",F,[e("div",H,[I(A,{title:"정산하기","back-action":R}),o(b)?(n(),s("main",T,r[2]||(r[2]=[e("p",null,"최종 정산 결과를 계산하는 중...",-1)]))):o(h)?(n(),s("main",U,[e("p",null,a(o(h)),1)])):o(l)?(n(),s("main",$,[e("div",j,[e("p",x,a(o(l).tripName),1),e("h2",z," 총 "+a(o(l).totalAmount?.toLocaleString()||0)+"원 사용 ",1)]),e("div",E,[e("div",G,[g(e("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>S(i)?i.value=t:null),class:"member-select"},[(n(!0),s(c,null,d(o(l).members,t=>(n(),s("option",{key:t,value:t},a(t),9,J))),128))],512),[[f,o(i)]]),r[3]||(r[3]=e("span",{class:"card-title"},"님이 받을 돈",-1))]),e("div",K,[o(v).length>0?(n(),s("div",O,[(n(!0),s(c,null,d(o(v),(t,_)=>(n(),s("div",{key:_,class:"transaction-item"},[e("div",P,[e("div",Q,[e("span",null,a(t.senderNickname?.substring(0,1)||"?"),1)]),e("span",null,a(t.senderNickname||"알 수 없음"),1)]),e("span",W,a(t.amount?.toLocaleString()||0)+"원",1)]))),128))])):(n(),s("p",X,"받을 돈이 없습니다."))])]),e("div",Y,[e("div",Z,[g(e("select",{"onUpdate:modelValue":r[1]||(r[1]=t=>S(i)?i.value=t:null),class:"member-select"},[(n(!0),s(c,null,d(o(l).members,t=>(n(),s("option",{key:t,value:t},a(t),9,ee))),128))],512),[[f,o(i)]]),r[4]||(r[4]=e("span",{class:"card-title"},"님이 보낼 돈",-1))]),e("div",te,[o(y).length>0?(n(),s("div",se,[(n(!0),s(c,null,d(o(y),(t,_)=>(n(),s("div",{key:_,class:"transaction-item"},[e("div",ne,[e("div",oe,[e("span",null,a(t.receiverNickname?.substring(0,1)||"?"),1)]),e("span",null,a(t.receiverNickname||"알 수 없음"),1)]),e("span",ae,a(t.amount?.toLocaleString()||0)+"원",1)]))),128))])):(n(),s("p",re,"보낼 돈이 없습니다."))])])])):M("",!0),e("footer",{class:"footer"},[e("button",{onClick:w,class:"next-button"}," 정산 요청 보내기 ")])])]))}},me=L(ie,[["__scopeId","data-v-42945d5b"]]);export{me as default};
