import{_ as V,s as w,a as B,u as q,o as D,c as s,b as n,d as I,g as M,e,f as o,t as a,w as g,v as f,i as S,F as l,h as d}from"./index-C9ApI8vq.js";import{H as C}from"./Header2-UY8uQ6hN.js";import{u as F}from"./settlementStore-C9vI0BBV.js";import"./index-PeG32rCn.js";const H={class:"settlement-view"},T={key:0,class:"content-container loading"},U={key:1,class:"content-container error"},$={key:2,class:"content-container"},A={class:"summary-header"},E={class:"trip-name"},G={class:"total-amount"},j={class:"settlement-card"},x={class:"card-header"},z=["value"],J={class:"transaction-list"},K={key:0},O={class:"member-info"},P={class:"avatar bg-theme-secondary"},Q={class:"amount"},W={key:1,class:"empty-message"},X={class:"settlement-card"},Y={class:"card-header"},Z=["value"],ee={class:"transaction-list"},te={key:0},se={class:"member-info"},ne={class:"avatar bg-theme-primary"},oe={class:"amount"},ae={key:1,class:"empty-message"},re={__name:"SettlementRequestView",setup(ie){const p=F(),{groupSettlementData:c,selectedMember:i,isLoading:b,error:h,toReceiveList:v,toSendList:y}=w(p),N=B(),k=q(),u=N.params.tripId,R=()=>{k.push(`/settlement/${u}`)};D(async()=>{try{await p.fetchGroupSettlement(u)}catch{}});const L=async()=>{if(confirm("정산 내역을 확인하러 가시겠습니까?"))try{k.push(`/settlement/${u}/detail`)}catch(m){console.error("페이지 이동 실패:",m),alert("페이지 이동에 실패했습니다.")}};return(m,r)=>(n(),s("div",H,[I(C,{title:"정산하기","back-action":R}),o(b)?(n(),s("main",T,r[2]||(r[2]=[e("p",null,"최종 정산 결과를 계산하는 중...",-1)]))):o(h)?(n(),s("main",U,[e("p",null,a(o(h)),1)])):o(c)?(n(),s("main",$,[e("div",A,[e("p",E,a(o(c).tripName),1),e("h2",G," 총 "+a(o(c).totalAmount?.toLocaleString()||0)+"원 사용 ",1)]),e("div",j,[e("div",x,[g(e("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>S(i)?i.value=t:null),class:"member-select"},[(n(!0),s(l,null,d(o(c).members,t=>(n(),s("option",{key:t,value:t},a(t),9,z))),128))],512),[[f,o(i)]]),r[3]||(r[3]=e("span",{class:"card-title"},"님이 받을 돈",-1))]),e("div",J,[o(v).length>0?(n(),s("div",K,[(n(!0),s(l,null,d(o(v),(t,_)=>(n(),s("div",{key:_,class:"transaction-item"},[e("div",O,[e("div",P,[e("span",null,a(t.senderNickname?.substring(0,1)||"?"),1)]),e("span",null,a(t.senderNickname||"알 수 없음"),1)]),e("span",Q,a(t.amount?.toLocaleString()||0)+"원",1)]))),128))])):(n(),s("p",W,"받을 돈이 없습니다."))])]),e("div",X,[e("div",Y,[g(e("select",{"onUpdate:modelValue":r[1]||(r[1]=t=>S(i)?i.value=t:null),class:"member-select"},[(n(!0),s(l,null,d(o(c).members,t=>(n(),s("option",{key:t,value:t},a(t),9,Z))),128))],512),[[f,o(i)]]),r[4]||(r[4]=e("span",{class:"card-title"},"님이 보낼 돈",-1))]),e("div",ee,[o(y).length>0?(n(),s("div",te,[(n(!0),s(l,null,d(o(y),(t,_)=>(n(),s("div",{key:_,class:"transaction-item"},[e("div",se,[e("div",ne,[e("span",null,a(t.receiverNickname?.substring(0,1)||"?"),1)]),e("span",null,a(t.receiverNickname||"알 수 없음"),1)]),e("span",oe,a(t.amount?.toLocaleString()||0)+"원",1)]))),128))])):(n(),s("p",ae,"보낼 돈이 없습니다."))])])])):M("",!0),e("footer",{class:"footer"},[e("button",{onClick:L,class:"next-button"}," 정산 요청 보내기 ")])]))}},me=V(re,[["__scopeId","data-v-b59c05ec"]]);export{me as default};
