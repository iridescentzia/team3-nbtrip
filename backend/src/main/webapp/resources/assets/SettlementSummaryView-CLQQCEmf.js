import{H as v}from"./Header-BOsaVxcG.js";import{g,a as h}from"./settlementApi-Bk0pi4fb.js";import{_ as y,r as u,s as f,q as S,o as b,e as s,f as n,g as e,x as k,j as x,t as a,F as w,p as L}from"./index-8gf4eXaq.js";const N={class:"view-wrapper"},T={class:"settlement-view"},V={key:0,class:"content-container loading"},B={key:1,class:"content-container error"},I={key:2,class:"content-container"},R={class:"summary-header"},P={class:"trip-name"},$={class:"total-amount"},q={class:"member-payment-card"},C={class:"member-list"},D={class:"member-info"},F={class:"member-avatar"},H={class:"member-name"},j={class:"member-amount"},A={__name:"SettlementSummaryView",setup(E){const o=u(null),d=u(!0),r=u(null),p=f(),m=S(),l=p.params.tripId;b(async()=>{const i=new Promise(t=>setTimeout(t,800));try{const[t]=await Promise.all([g(l),i]);o.value=t.data}catch(t){console.error("Ï†ïÏÇ∞ ÏöîÏïΩ Ï†ïÎ≥¥ Î°úÎî© Ïã§Ìå®:",t),t.response?.status===403?(r.value="Í∑∏Î£πÏû•Îßå Ï†ïÏÇ∞ÏùÑ ÏöîÏ≤≠Ìï† Ïàò ÏûàÏäµÎãàÎã§.",setTimeout(()=>{m.push(`/trip/${l}`)},3e3)):t.response?.status===404?r.value="Ïó¨Ìñâ Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.":r.value="Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Îç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§."}finally{d.value=!1}});const _=async()=>{try{if(((await h(l)).data||[]).length>0){console.log("‚úÖ Ïù¥ÎØ∏ Ï†ïÏÇ∞Ïù¥ ÏÉùÏÑ±Îê®. Î∞îÎ°ú detailviewÎ°ú Ïù¥Îèô"),m.push(`/settlement/${l}/detail`);return}console.log("üîç Ï†ïÏÇ∞Ïù¥ ÏóÜÏùå. ÎìúÎ°≠Îã§Ïö¥ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô"),m.push(`/settlement/${l}/request`)}catch(i){console.error("Ï†ïÏÇ∞ ÌôïÏù∏ Ïã§Ìå®:",i),alert("Ï†ïÏÇ∞ ÌôïÏù∏ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.")}};return(i,t)=>(n(),s("div",N,[e("div",T,[k(v,{title:"Ï†ïÏÇ∞ÌïòÍ∏∞"}),d.value?(n(),s("main",V,t[0]||(t[0]=[e("div",{class:"spinner"},null,-1),e("p",null,"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...",-1)]))):r.value?(n(),s("main",B,[e("p",null,a(r.value),1)])):o.value?(n(),s("main",I,[e("div",R,[e("p",P,a(o.value.tripName),1),e("h2",$," Ï¥ù "+a(o.value.totalAmount?.toLocaleString()||0)+"Ïõê ÏÇ¨Ïö© ",1)]),e("div",q,[t[1]||(t[1]=e("h3",{class:"card-title"},"Î©§Î≤ÑÎ≥Ñ Í≤∞Ï†ú ÎÇ¥Ïó≠",-1)),e("div",C,[(n(!0),s(w,null,L(o.value.memberPayments,c=>(n(),s("div",{key:c.nickname,class:"member-item"},[e("div",D,[e("div",F,[e("span",null,a(c.nickname.substring(0,1)),1)]),e("span",H,a(c.nickname),1)]),e("p",j,a(c.amount?.toLocaleString()||0)+"Ïõê ",1)]))),128))])])])):x("",!0),e("footer",{class:"footer"},[e("button",{onClick:_,class:"next-button"},"Îã§Ïùå")])])]))}},J=y(A,[["__scopeId","data-v-6b8319bc"]]);export{J as default};
