import{H as p}from"./Header-xfQMi4Q3.js";import{g as v}from"./settlementApi-D4YvClna.js";import{_ as f,r as c,s as h,q as y,o as g,e as a,f as o,g as e,x as S,j as k,t as n,F as b,p as w}from"./index-Kd1lVUqJ.js";const N={class:"view-wrapper"},x={class:"settlement-view"},L={key:0,class:"content-container loading"},T={key:1,class:"content-container error"},V={key:2,class:"content-container"},B={class:"summary-header"},I={class:"trip-name"},P={class:"total-amount"},C={class:"member-payment-card"},D={class:"member-list"},F={class:"member-info"},H={class:"member-avatar"},R={class:"member-name"},j={class:"member-amount"},q={class:"footer"},A={__name:"SettlementSummaryView",setup(E){const r=c(null),m=c(!0),i=c(null),d=h(),_=y(),u=d.params.tripId;return g(async()=>{const l=new Promise(t=>setTimeout(t,800));try{const[t]=await Promise.all([v(u),l]);r.value=t.data}catch(t){console.error("정산 요약 정보 로딩 실패:",t),t.response?.status===403?(i.value="그룹장만 정산을 요청할 수 있습니다.",setTimeout(()=>{_.push(`/trip/${u}`)},3e3)):t.response?.status===404?i.value="여행 정보를 찾을 수 없습니다.":i.value="데이터를 불러오는 데 실패했습니다."}finally{m.value=!1}}),(l,t)=>(o(),a("div",N,[e("div",x,[S(p,{title:"정산하기"}),m.value?(o(),a("main",L,t[1]||(t[1]=[e("div",{class:"spinner"},null,-1),e("p",null,"데이터를 불러오는 중...",-1)]))):i.value?(o(),a("main",T,[e("p",null,n(i.value),1)])):r.value?(o(),a("main",V,[e("div",B,[e("p",I,n(r.value.tripName),1),e("h2",P," 총 "+n(r.value.totalAmount?.toLocaleString()||0)+"원 사용 ",1)]),e("div",C,[t[2]||(t[2]=e("h3",{class:"card-title"},"멤버별 결제 내역",-1)),e("div",D,[(o(!0),a(b,null,w(r.value.memberPayments,s=>(o(),a("div",{key:s.nickname,class:"member-item"},[e("div",F,[e("div",H,[e("span",null,n(s.nickname.substring(0,1)),1)]),e("span",R,n(s.nickname),1)]),e("p",j,n(s.amount?.toLocaleString()||0)+"원 ",1)]))),128))])])])):k("",!0),e("footer",q,[e("button",{onClick:t[0]||(t[0]=(...s)=>l.goToNextStep&&l.goToNextStep(...s)),class:"next-button"},"다음")])])]))}},G=f(A,[["__scopeId","data-v-802f4964"]]);export{G as default};
