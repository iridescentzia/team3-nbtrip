import{H as k}from"./Header-DBB-Wx7L.js";import{_ as y,r as u,o as g,c as _,e as s,f as n,g as t,x as S,j as b,t as l,F as h,p,A as d}from"./index-BXoqDEw8.js";const N={class:"view-wrapper"},w={class:"settlement-view"},I={key:0,class:"content-container loading"},L={key:1,class:"content-container error"},V={key:2,class:"content-container"},A={class:"summary-header"},R={class:"trip-name"},B={class:"total-amount"},D={class:"settlement-card"},T={class:"transaction-list"},C={key:0},F={class:"member-info"},H={class:"avatar"},M={class:"font-semibold text-sm text-theme-text"},j={class:"amount text-theme-text"},E={key:1,class:"empty-message text-theme-text"},P={class:"settlement-card"},$={class:"transaction-list"},q={key:0},z={class:"member-info"},G={class:"avatar"},J={class:"font-semibold text-sm text-white"},K={class:"amount text-white"},O={key:1,class:"empty-message text-white"},Q={class:"summary-card"},U={key:0,class:"text-theme-text"},W={class:"font-bold text-lg text-theme-blue"},X={key:1,class:"text-theme-text"},Y={class:"font-bold text-lg text-theme-red"},Z={key:2,class:"font-bold text-theme-text"},tt={class:"footer"},et=["disabled"],st={__name:"SettlementDetailView",setup(nt){const o=u(null),v=u(!0),m=u(null);g(async()=>{try{await new Promise(a=>setTimeout(a,500)),o.value={tripName:"서울 우정여행",totalAmount:39e4,toReceive:[{settlementId:1,senderNickname:"이건우",amount:12500},{settlementId:2,senderNickname:"최정훈",amount:4e4},{settlementId:3,senderNickname:"권준호",amount:5e4}],toSend:[]}}catch(a){console.error("개인 정산 정보 로딩 실패:",a),m.value="데이터를 불러오는 데 실패했습니다."}finally{v.value=!1}});const f=_(()=>o.value?o.value.toReceive.reduce((a,e)=>a+e.amount,0):0),r=_(()=>o.value?o.value.toSend.reduce((a,e)=>a+e.amount,0):0),c=_(()=>f.value-r.value),x=async()=>{if(r.value===0){alert("보낼 돈이 없습니다.");return}if(confirm(`총 ${r.value.toLocaleString()}원을 송금할까요?`))try{const a=o.value.toSend.map(e=>e.settlementId);alert("송금이 완료되었습니다!")}catch(a){console.error("송금 실패:",a),alert("송금 중 오류가 발생했습니다.")}};return(a,e)=>(n(),s("div",N,[t("div",w,[S(k,{title:"정산하기"}),v.value?(n(),s("main",I,e[0]||(e[0]=[t("p",null,"내 정산 내역을 불러오는 중...",-1)]))):m.value?(n(),s("main",L,[t("p",null,l(m.value),1)])):o.value?(n(),s("main",V,[t("div",A,[t("p",R,l(o.value.tripName),1),t("h2",B," 총 "+l(o.value.totalAmount?.toLocaleString()||0)+"원 사용 ",1)]),t("div",D,[e[1]||(e[1]=t("p",{class:"card-title text-theme-text"},"💸 받을 돈",-1)),t("div",T,[o.value.toReceive.length>0?(n(),s("div",C,[(n(!0),s(h,null,p(o.value.toReceive,i=>(n(),s("div",{key:i.settlementId,class:"transaction-item"},[t("div",F,[t("div",H,[t("span",null,l(i.senderNickname.substring(0,1)),1)]),t("span",M,l(i.senderNickname),1)]),t("span",j,l(i.amount.toLocaleString())+"원",1)]))),128))])):(n(),s("p",E," 받을 돈이 없습니다. "))])]),t("div",P,[e[2]||(e[2]=t("p",{class:"card-title text-white"},"💌 보낼 돈",-1)),t("div",$,[o.value.toSend.length>0?(n(),s("div",q,[(n(!0),s(h,null,p(o.value.toSend,i=>(n(),s("div",{key:i.settlementId,class:"transaction-item"},[t("div",z,[t("div",G,[t("span",null,l(i.receiverNickname.substring(0,1)),1)]),t("span",J,l(i.receiverNickname),1)]),t("span",K,l(i.amount.toLocaleString())+"원",1)]))),128))])):(n(),s("p",O,"보낼 돈이 없습니다."))])]),t("div",Q,[c.value>0?(n(),s("p",U,[e[3]||(e[3]=d(" 총 ",-1)),t("span",W,l(c.value.toLocaleString())+"원",1),e[4]||(e[4]=d("을 받으면 정산 완료! ",-1))])):c.value<0?(n(),s("p",X,[e[5]||(e[5]=d(" 총 ",-1)),t("span",Y,l(Math.abs(c.value).toLocaleString())+"원",1),e[6]||(e[6]=d("을 보내면 정산 완료! ",-1))])):(n(),s("p",Z,"정산이 완료되었습니다!"))])])):b("",!0),t("footer",tt,[t("button",{onClick:x,class:"next-button",disabled:r.value===0}," 송금하기 ",8,et)])])]))}},lt=y(st,[["__scopeId","data-v-6f0a2266"]]);export{lt as default};
