import{H as x}from"./Header-CPcTArx-.js";import{_ as g,r as u,o as k,c as _,e as s,f as n,g as e,x as b,j as S,t as l,F as h,p,A as d}from"./index-CUX7TRhT.js";const N={class:"view-wrapper"},w={class:"settlement-view"},I={key:0,class:"content-container loading"},L={key:1,class:"content-container error"},V={key:2,class:"content-container"},A={class:"summary-header"},R={class:"trip-name"},B={class:"total-amount"},D={class:"settlement-card bg-theme-primary"},T={class:"transaction-list"},C={key:0},F={class:"member-info"},H={class:"avatar bg-theme-secondary"},M={class:"font-semibold text-sm text-theme-text"},j={class:"amount text-theme-text"},E={key:1,class:"empty-message text-theme-text"},P={class:"settlement-card bg-theme-secondary"},$={class:"transaction-list"},q={key:0},z={class:"member-info"},G={class:"avatar bg-theme-primary"},J={class:"font-semibold text-sm text-white"},K={class:"amount text-white"},O={key:1,class:"empty-message text-white"},Q={class:"summary-card"},U={key:0,class:"text-theme-text"},W={class:"font-bold text-lg text-theme-blue"},X={key:1,class:"text-theme-text"},Y={class:"font-bold text-lg text-theme-red"},Z={key:2,class:"font-bold text-theme-text"},ee={class:"footer"},te=["disabled"],se={__name:"SettlementDetailView",setup(ne){const o=u(null),v=u(!0),m=u(null);k(async()=>{try{await new Promise(a=>setTimeout(a,500)),o.value={tripName:"서울 우정여행",totalAmount:39e4,toReceive:[{settlementId:1,senderNickname:"이건우",amount:12500},{settlementId:2,senderNickname:"최정훈",amount:4e4},{settlementId:3,senderNickname:"권준호",amount:5e4}],toSend:[]}}catch(a){console.error("개인 정산 정보 로딩 실패:",a),m.value="데이터를 불러오는 데 실패했습니다."}finally{v.value=!1}});const y=_(()=>o.value?o.value.toReceive.reduce((a,t)=>a+t.amount,0):0),r=_(()=>o.value?o.value.toSend.reduce((a,t)=>a+t.amount,0):0),c=_(()=>y.value-r.value),f=async()=>{if(r.value===0){alert("보낼 돈이 없습니다.");return}if(confirm(`총 ${r.value.toLocaleString()}원을 송금할까요?`))try{const a=o.value.toSend.map(t=>t.settlementId);alert("송금이 완료되었습니다!")}catch(a){console.error("송금 실패:",a),alert("송금 중 오류가 발생했습니다.")}};return(a,t)=>(n(),s("div",N,[e("div",w,[b(x,{title:"정산하기"}),v.value?(n(),s("main",I,t[0]||(t[0]=[e("p",null,"내 정산 내역을 불러오는 중...",-1)]))):m.value?(n(),s("main",L,[e("p",null,l(m.value),1)])):o.value?(n(),s("main",V,[e("div",A,[e("p",R,l(o.value.tripName),1),e("h2",B," 총 "+l(o.value.totalAmount?.toLocaleString()||0)+"원 사용 ",1)]),e("div",D,[t[1]||(t[1]=e("p",{class:"card-title text-theme-text"},"💸 받을 돈",-1)),e("div",T,[o.value.toReceive.length>0?(n(),s("div",C,[(n(!0),s(h,null,p(o.value.toReceive,i=>(n(),s("div",{key:i.settlementId,class:"transaction-item"},[e("div",F,[e("div",H,[e("span",null,l(i.senderNickname.substring(0,1)),1)]),e("span",M,l(i.senderNickname),1)]),e("span",j,l(i.amount.toLocaleString())+"원",1)]))),128))])):(n(),s("p",E," 받을 돈이 없습니다. "))])]),e("div",P,[t[2]||(t[2]=e("p",{class:"card-title text-white"},"💌 보낼 돈",-1)),e("div",$,[o.value.toSend.length>0?(n(),s("div",q,[(n(!0),s(h,null,p(o.value.toSend,i=>(n(),s("div",{key:i.settlementId,class:"transaction-item"},[e("div",z,[e("div",G,[e("span",null,l(i.receiverNickname.substring(0,1)),1)]),e("span",J,l(i.receiverNickname),1)]),e("span",K,l(i.amount.toLocaleString())+"원",1)]))),128))])):(n(),s("p",O,"보낼 돈이 없습니다."))])]),e("div",Q,[c.value>0?(n(),s("p",U,[t[3]||(t[3]=d(" 총 ",-1)),e("span",W,l(c.value.toLocaleString())+"원",1),t[4]||(t[4]=d("을 받으면 정산 완료! ",-1))])):c.value<0?(n(),s("p",X,[t[5]||(t[5]=d(" 총 ",-1)),e("span",Y,l(Math.abs(c.value).toLocaleString())+"원",1),t[6]||(t[6]=d("을 보내면 정산 완료! ",-1))])):(n(),s("p",Z,"정산이 완료되었습니다!"))])])):S("",!0),e("footer",ee,[e("button",{onClick:f,class:"next-button",disabled:r.value===0}," 송금하기 ",8,te)])])]))}},le=g(se,[["__scopeId","data-v-f1cd6343"]]);export{le as default};
