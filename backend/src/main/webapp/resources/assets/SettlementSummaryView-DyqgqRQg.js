import{H as v}from"./Header-dtYS9U6E.js";import{g as h}from"./settlementApi-BM7pp5uq.js";import{_ as f,r as c,s as y,q as g,o as k,e as s,f as a,g as e,x as S,j as b,t as o,F as w,p as x}from"./index-vRGwAET3.js";const L={class:"view-wrapper"},N={class:"settlement-view"},V={key:0,class:"content-container loading"},T={key:1,class:"content-container error"},B={key:2,class:"content-container"},I={class:"summary-header"},P={class:"trip-name"},q={class:"total-amount"},C={class:"member-payment-card"},D={class:"member-list"},F={class:"member-info"},H={class:"member-avatar"},R={class:"member-name"},$={class:"member-amount"},j={__name:"SettlementSummaryView",setup(A){const n=c(null),m=c(!0),r=c(null),_=y(),u=g(),i=_.params.tripId;k(async()=>{const d=new Promise(t=>setTimeout(t,800));try{const[t]=await Promise.all([h(i),d]);n.value=t.data}catch(t){console.error("정산 요약 정보 로딩 실패:",t),t.response?.status===403?(r.value="그룹장만 정산을 요청할 수 있습니다.",setTimeout(()=>{u.push(`/trip/${i}`)},3e3)):t.response?.status===404?r.value="여행 정보를 찾을 수 없습니다.":r.value="데이터를 불러오는 데 실패했습니다."}finally{m.value=!1}});const p=()=>{console.log("다음 단계로 이동합니다."),u.push(`/settlement/${i}/request`)};return(d,t)=>(a(),s("div",L,[e("div",N,[S(v,{title:"정산하기"}),m.value?(a(),s("main",V,t[0]||(t[0]=[e("div",{class:"spinner"},null,-1),e("p",null,"데이터를 불러오는 중...",-1)]))):r.value?(a(),s("main",T,[e("p",null,o(r.value),1)])):n.value?(a(),s("main",B,[e("div",I,[e("p",P,o(n.value.tripName),1),e("h2",q," 총 "+o(n.value.totalAmount?.toLocaleString()||0)+"원 사용 ",1)]),e("div",C,[t[1]||(t[1]=e("h3",{class:"card-title"},"멤버별 결제 내역",-1)),e("div",D,[(a(!0),s(w,null,x(n.value.memberPayments,l=>(a(),s("div",{key:l.nickname,class:"member-item"},[e("div",F,[e("div",H,[e("span",null,o(l.nickname.substring(0,1)),1)]),e("span",R,o(l.nickname),1)]),e("p",$,o(l.amount?.toLocaleString()||0)+"원 ",1)]))),128))])])])):b("",!0),e("footer",{class:"footer"},[e("button",{onClick:p,class:"next-button"},"다음")])])]))}},G=f(j,[["__scopeId","data-v-ed3b00f5"]]);export{G as default};
